<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Startseite</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&family=Workbench&display=swap" rel="stylesheet">
    <style>
        /* Grundlegende CSS-Regeln */
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
          font-family: Arial, sans-serif;
        }
        body {
          display: flex;
          height: 100vh;
          background-color: #f4f4f4;
        }
        .sidebar {
          width: 15%;
          background: linear-gradient(to bottom, #002a5c, #a5a5a5);
          color: white;
          display: flex;
          flex-direction: column;
          align-items: stretch;
          padding: 2rem 0;
          border-top-right-radius: 5%;
          border-bottom-right-radius: 5%;
          justify-content: space-between;
        }
        .sidebar a {
          text-decoration: none;
          color: white;
          padding: 1rem;
          text-align: center;
          margin-top: 1rem;
          border-bottom: 1px solid #0055a5;
        }
        .sidebar a:hover {
          background-color: #004080;
        }
        .sidebar .image-placeholder {
          height: 100px;
          background-color: #cce0ff;
          margin: 1rem;
          border-radius: 8px;
          display: flex;
          justify-content: center;
          align-items: center;
          color: #003366;
          font-size: 0.9rem;
          font-weight: bold;
        }
        .main {
          flex: 1;
          padding: 2rem;
          display: flex;
          flex-direction: column;
          position: relative;
        }
        .top-controls {
          display: flex;
          justify-content: flex-end;
          align-items: center;
          gap: 20px;
        }
        .logout {
          padding: 0.5rem 1rem;
          background-color: #003366;
          color: white;
          text-decoration: none;
          border: none;
          border-radius: 5px;
          cursor: pointer;
        }
        .logout:hover {
          background-color: #0055a5;
        }
        .weather-container {
          font-size: 1.2rem;
          color: #003366;
        }
        .header {
          font-size: 4rem;
          font-weight: bold;
          margin: 1rem 0;
          color: #003366;
          text-align: center;
        }
        .tiles {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 1.5rem;
          flex: 1;
          margin-top: 2rem;
        }
        .tile {
          background-color: #e6f0ff;
          display: flex;
          justify-content: center;
          align-items: center;
          font-size: 1rem;
          font-weight: bold;
          border: 1px solid #003366;
          border-radius: 10px;
          cursor: pointer;
          transition: transform 0.3s, background-color 0.3s;
          height: 250px;
          width: 750px;
          overflow: hidden;
        }
        .tile:hover {
          transform: scale(1.05);
          background-color: #cce0ff;
        }
        .fileserver√ºberschrift {
          position: absolute;
          top: 27%;
          left: 31%;
          transform: translate(-50%, -50%);
          z-index: 1;
          font-family: workbench;
          font-size: 35px;
          font-weight: bold;
          color: rgb(182, 184, 190);
        }
        .pr√ºfungsrechner√ºberschrift {
          position: absolute;
          top: 27%;
          left: 73%;
          transform: translate(-50%, -50%);
          z-index: 1;
          font-family: workbench;
          font-size: 35px;
          font-weight: bold;
          color: rgb(182, 184, 190);
        }
        .chat√ºbershrift {
          position: absolute;
          top: 67%;
          left: 29%;
          transform: translate(-50%, -50%);
          z-index: 1;
          font-family: workbench;
          font-size: 35px;
          font-weight: bold;
          color: rgb(182, 184, 190);
        }
        .profile√ºberschrift {
          position: absolute;
          top: 67%;
          left: 73%;
          font-family: workbench;
          font-size: 35px;
          font-weight: bold;
          color: rgb(182, 184, 190);
        }
    </style>
</head>
<body>
<script>
    function logoutUser() {
      alert("Sie werden ausgeloggt.");
      window.location.href = "/logout";
    }
</script>

<div class="sidebar">
    <a href="https://www.mischok.academy/">Mischok Academy</a>
    <a href="https://www.mischok.de/">Mischok GmbH</a>
    <a href="https://www.mischok.de/impressum">Mischok Impressum</a>
    <a href="https://www.instagram.com/mischok.de/">Social Media</a>
    <div class="image-placeholder">
        <img th:src="@{/images/Mischok.png}" alt="mischoklogo" style="max-height: 100%; max-width: 100%; object-fit: contain; border-radius: 8px;">
    </div>
</div>

<div class="main">
    <!-- Obere Leiste mit Logout-Button und Wetteranzeige -->
    <div class="top-controls">
        <button class="logout" onclick="logoutUser()">Logout</button>
        <div class="weather-container">
            üå°Ô∏è Temperatur: <span th:text="${temperature}">--</span>¬∞C<br>
            ‚òÅÔ∏è Wetter: <span th:text="${weatherDescription}">--</span>
        </div>
    </div>

    <div class="header">Startseite</div>

    <div class="tiles">
        <div class="tile">
            <img th:src="@{/images/FileServer.jpg}" alt="FileServer" style="max-height: 100%; max-width: 100%; object-fit: contain; border-radius: 10px;">
            <div>
                <h1 class="fileserver√ºberschrift">FileServer</h1>
            </div>
        </div>
        <div class="tile" onclick="window.location.href='/pr√ºfungsrechner'">
            <img th:src="@{/images/Hindergrundbild.jpg}" alt="Hintergrundlogo" style="max-height: 100%; max-width: 100%; object-fit: contain; border-radius: 10px;">
            <div class="tile-text pr√ºfungsrechner√ºberschrift">Pr√ºfungsrechner</div>
        </div>
        <div class="tile" onclick="window.location.href='/chatseite'">
            <img src="/images/Chat.jpg" alt="Chat" style="max-height: 100%; max-width: 100%; object-fit: contain; border-radius: 10px;">
            <div class="tile-text chat√ºbershrift">Chat</div>
        </div>
        <div class="tile" onclick="window.location.href='/profile'">
            <img src="/images/Profile.jpg" alt="Profile" style="max-height: 100%; max-width: 100%; object-fit: contain; border-radius: 10px;">
            <div class="tile-text profile√ºberschrift">Profile</div>
        </div>
    </div>
</div>
<script>
    function loadWeatherData() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          const latitude = position.coords.latitude;
          const longitude = position.coords.longitude;

          // Request an deinen WeatherController senden
          fetch(`/api/weather?latitude=${latitude}&longitude=${longitude}`)
            .then(response => response.json())
            .then(data => {
              const weatherContainer = document.querySelector('.weather-container');
              // Pr√ºfen, ob die erwarteten Daten vorhanden sind und das Display aktualisieren.
              if (data && data.main && data.weather) {
                const temperature = data.main.temp; // Beispiel: Temperatur aus "main"
                const description = data.weather[0].description; // Beispiel: Beschreibung aus "weather"
                weatherContainer.innerHTML = `üå°Ô∏è Temperatur: ${temperature}¬∞C<br>‚òÅÔ∏è Wetter: ${description}`;
              } else {
                weatherContainer.innerHTML = "Keine Wetterdaten verf√ºgbar.";
              }
            })
            .catch(error => {
              console.error('Fehler beim Abrufen der Wetterdaten:', error);
            });
        }, function(error) {
          console.error("Fehler bei der Ermittlung des Standorts:", error);
        });
      } else {
        console.error("Geolocation wird von diesem Browser nicht unterst√ºtzt.");
      }
    }

    // Die Funktion wird beim Laden der Seite aufgerufen
    window.onload = loadWeatherData;
</script>

</body>
</html>
